apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'war'
sourceCompatibility = 1.8

buildscript {
	repositories {
	  mavenLocal()
    	maven {    	
        	url "http://svn.etena.cn:8081/content/groups/public/"
    	}
	}	
	dependencies {
	  classpath 'org.akhikhl.gretty:gretty:1.2.4'
	}
}

repositories {
	mavenLocal();
    maven {    	
        url "http://svn.etena.cn:8081/content/groups/public/"
    }
    maven {    	
        url "http://repository.ow2.org/nexus/content/repositories/public/"
    }
}
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

sourceSets {
	main {
		java {
            srcDirs = ['src/main/java','src/main/test']
        }
    	println '****************'+'src/resources'+'****************'
    	resources {
            srcDir 'resources'
        }
    }
}
project.ext.set("springVersion", "4.2.4.RELEASE")
/****濞撴碍绻嗙粋鍡涘礂瀹曞洭鍏�*****************/
dependencies {
	compile 'javax.servlet:jstl:1.2'
	compile 'org.springframework:spring-core:'+ springVersion
	compile 'org.springframework:spring-beans:'+ springVersion
	compile 'org.springframework:spring-aop:'+ springVersion
	compile 'org.springframework:spring-context:'+ springVersion
	compile 'org.springframework:spring-context-support:'+ springVersion
	compile 'org.springframework:spring-expression:'+ springVersion
	compile 'org.springframework:spring-tx:'+ springVersion
	compile 'org.springframework:spring-jdbc:'+ springVersion
	compile 'org.springframework:spring-web:'+ springVersion
  	compile 'org.springframework:spring-webmvc:'+ springVersion
  	compile 'org.dom4j:dom4j:2.0.0'
  	compile 'org.apache.httpcomponents:httpclient:4.5.3'
  	compile 'mysql:mysql-connector-java:6.0.6'
  	compile 'com.alibaba:fastjson:1.2.33'
  	
  	compile	"junit:junit:4.9"
}

version = '1.0.0'
jar {
	manifest {
        attributes 'Created-By':'zuo lang',
        'Implementation-Title': 'spring zuo', 
        'Implementation-Version': version
    }
	from(sourceSets.test.allJava)
}
task sourceJar(type: Jar) { 
    from sourceSets.main.allJava
    from sourceSets.test.allJava
    classifier "sources"
}
javadoc {
	source = [sourceSets.main.allJava,sourceSets.test.allJava] //闂傚浄鎷烽悷鏇氳兌閺佹捇骞嬮幁鎻硋adoc闁汇劌瀚花顕�鎯嶆担绋跨樁
	classpath=configurations.testCompile
    options.encoding = "UTF-8"
    options.charSet = "UTF-8"
    options.links = ["http://docs.oracle.com/javase/8/docs/api/"]
    options.memberLevel="PACKAGE"
}

task javadocJar(type: Jar, dependsOn: javadoc) {
	from javadoc.destinationDir
    classifier = 'javadoc'	    
}

task copyContext(type: Copy) {
	description ''
    from 'src/resources/context.xml'
    into 'src/main/webapp/META-INF'
}
apply plugin: 'org.akhikhl.gretty'	
gretty {
    port = 8080
    servletContainer = 'tomcat8'
	contextPath ="/"
	enableNaming=true 
	//scanInterval 0
}
